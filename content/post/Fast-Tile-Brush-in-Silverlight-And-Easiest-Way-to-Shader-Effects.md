---
title: "Fast Tile Brush in Silverlight, And Easiest Way to Shader Effects"
date: 2009-12-22T00:36:00.0000000
draft: false
featured_image: ""
---

<p>Here is one monster, tiled as 6&nbsp;monsters down here:</p>
<iframe src="/sample.aspx?xap=TileShaderEffect" width="400px" height="300px"></iframe>
<p>This is actually 1 monster, tiled twice horizontally and 3 times vertically using a Silverlght Tile brush shader effect.</p>
<p><a href="http://nokola.com/sources/TileShaderEffect.zip">Download source code</a></p>
<p>I'm not 100% sure if this is the fastest way, but it's definitely worth it (fast). There are 2 other possible ways to do fast tiling:</p>
<ol>
<li>Do it manually or "hardcoded" - if your tile will never change, just do it in any image editor and then display the tiled result using an Image tag</li>
<li>Display several images next to each other - relatively harder, but might end up being faster than the pixel shader (this is just a speculation on my side since I haven't tested it yet, but it <strong>is worth a try</strong>). Image-s can be rendered on the GPU, if you enable BitmapCache and GPU acceleration in Silverlight, while the pixel shaders are currently (in Silverlight 3) calculated on the CPU.</li>
</ol>
<p>The pixel shader code:</p>
<p>[code:c#]</p>
<p>// Amount of tiling in the X and Y direction<br />float2 TileCount : register(C0);<br />sampler2D implicitInput : register(s0);</p>
<p>float4 main(float2 uv : TEXCOORD) : COLOR <br />{ <br />&nbsp;return tex2D(implicitInput, frac(uv.xy * TileCount.xy));<br />}<br />[/code]</p>
<p>Sample usage:</p>
<pre><span style="font-size: small;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&lt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">Image</span></span></span><span style="font-family: Consolas; color: #ff0000;"><span style="font-family: Consolas; color: #ff0000;"><span style="font-family: Consolas; color: #ff0000;"> Source</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">="http://nokola.com/clientbin/images/icons/games.png"&gt;</span></span></span></span></pre>
<pre><span style="font-size: small;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&nbsp; &lt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">Image.Effect</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&gt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">&nbsp;</span></span></span></span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span></span></pre>
<pre><span style="font-size: small;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&nbsp;&nbsp;&nbsp; &lt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">local</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">:</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">TileEffect</span></span></span><span style="font-family: Consolas; color: #ff0000;"><span style="font-family: Consolas; color: #ff0000;"><span style="font-family: Consolas; color: #ff0000;"> TileCount</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">="2,3" /&gt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">&nbsp;</span></span></span></span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&nbsp; </span></span></span></span></pre>
<pre><span style="font-size: small;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&nbsp; &lt;/</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">Image.Effect</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&gt;</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"> </span></span></span></span></span></span></span></pre>
<pre><span style="font-size: small;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&lt;/</span></span></span><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;"><span style="font-family: Consolas; color: #a31515;">Image</span></span></span><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;"><span style="font-family: Consolas; color: #0000ff;">&gt;</span></span></span></span></pre>
<p><span style="font-family: Consolas; font-size: x-small;"><span style="font-family: Verdana;"><span style="font-size: small;">And I also mentioned the easiest way to shader effects.</span></span></span></p>
<p><span style="font-family: Consolas; font-size: x-small;"><span style="font-family: Verdana; font-size: xx-small;"><span style="font-size: small;">Currently I believe you can start almost immediately with Shazzam: </span><a href="http://shazzam-tool.com/"><span style="font-size: small;">http://shazzam-tool.com/</span></a><span style="font-size: small;">. </span></span></span></p>
<p><span style="font-family: Consolas; font-size: x-small;"><span style="font-family: Verdana;"><span style="font-size: small;">It's a tool you can use to test out your shader effects, and will create the required Silverlight or WPF code-behind for you.</span></span></span></p>
<p><span style="font-size: small;">I know there are other Tile brushes for Silverlight out there, but I haven't found a simple pixel shader (with one instruction and frac()). The pixel shaders I found usually use 2 variables - one for x-tiling, one for y-tiling. Since Pixel shaders, even on the CPU, supposedly favour SIMD (single instruction, multiple data), less instructions should mean faster performance (depends on the shader compiler too).</span></p>
<h2><span style="font-size: small;">What can you use it for?</span></h2>
<p><span style="font-size: small;">In a side-scroller or many other types of games, tiling textures is crucial - e.g. brick wall, metal, and other things.</span></p>