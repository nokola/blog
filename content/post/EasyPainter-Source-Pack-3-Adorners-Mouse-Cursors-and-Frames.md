---
title: "EasyPainter Source Pack 3: Adorners, Mouse Cursors and Frames"
date: 2010-03-17T01:11:30.0000000
draft: false
featured_image: ""
---

<p>Adorners went a long way since their first release few months ago. </p>  <p>They integrate with zoom now, have more options for controlling functionality and can use a shared &quot;cursor plane&quot; for displaying mouse cursors consistently across your application. Extensibility is improved allowing definition of custom adorner frames. There are 7 custom cursors and 4 custom frames to get you started :)</p>  <p><a href="http://nokola.com/sources/AdornersAndCursors.zip">Download source code</a></p>  <p>I use the same adorner implementation in <a href="http://nokola.com/easypainter">EasyPainter</a>.</p>  <p>Here's a live demo with different adorner frame for each image:</p> <iframe style="border-bottom: 0px solid; border-left: 0px solid; border-top: 0px solid; border-right: 0px solid" height="600" src="/sample.aspx?xap=AdornersAndCursors" frameborder="0" width="860"></iframe>  <h2>Features</h2>  <ul>   <li><strong>Custom, Extensible Mouse Cursors</strong> allow you to use the system or your own mouse cursors even if you don't use the adorner functionality. See CursorPlane.cs for more info </li> </ul>  <blockquote>   <p>The custom cursors support:</p> </blockquote>  <ul>   <ul>     <li>Size (for example, bigger cursor for bigger brush size) </li>      <li>Rotation (used to make the resize cursor perpendicular to the adorner frame) </li>   </ul> </ul>  <p>The current list supports all system cursors as well as these:</p>  <p>Size, // Size cursor that supports angle    <br />Rotate, // Rotate cursor supporting angle     <br />Move, // Move cursor     <br />Brush, // Brush cursor, supports size     <br />SelectionBrush, // Selection brush cursor     <br />Crosshair, // Crosshair cursor - like the one used on snipers or in image editing programs to pinpoint that pixel     <br />MarkerSelect, // Cursor used to select a marker on the surface (e.g. used to select point for applying origin for zoom blur effect) </p>  <p>To use the cursors you have to set up a cursor plane in XAML:</p>  <p>&lt;adorners:CursorPlane Name='cursorPlane' /&gt;</p>  <p>And then initialize it in code-behind:</p>  <p>&#160;&#160;&#160; InitializeComponent();    <br />&#160;&#160;&#160; ctlCursorPlane.SetSystemCursorElement(frameRoot); </p>  <p>The frameRoot specifies which control will display the cursors. For example, in EasyPainter the Crop adorner spans only the image (the adorner is parented to a different parent than the cursor plane), but the rotate/resize cursor go outside of the image. The frameRoot is used to calculate the offsets so that the adorners (or someone else using the cursor plane) can account for the different parents and draw the cursors at the correct locations on screen.</p>  <ul>   <li><strong>Customizable Adorners with extensible adorner frames</strong> </li> </ul>  <p>You can now define your custom adorner frames by creating a UserControl and implementing the functionality you need from the IAdornerFrame interface.</p>  <p>There are 4 existing frames currently: AnimatedRectangleFrame, CropFrame, GlassFrame and PointFrame. The last one is just a dot being used to specify locations of effects in EasyPainter â€“ e.g. Zoom motion effect.</p>  <p>The existing frames can be zoom-aware. For example the CropFrame displays the correct image width and height in the top-left corner regardless of zoom.</p>  <p>/// Represents an adorner frame, e.g. glass border    <br />public interface IAdornerFrame {     <br />&#160;&#160;&#160; /// Called when the frame is attached to adorner     <br />&#160;&#160;&#160; void Attached(); </p>  <p>&#160;&#160;&#160; /// Called when the frame is detached from adorner    <br />&#160;&#160;&#160; void Detached(); </p>  <p>&#160;&#160;&#160; /// Sets the zoom level for this adorner frame. The zoom level is used by the frame to display correct coordinates (e.g. Width and Height)    <br />&#160;&#160;&#160; void SetZoom(double newZoomLevel); </p>  <p>&#160;&#160;&#160; void SizeChanged(double newWidth, double newHeight);    <br />}</p>  <ul>   <li><strong>More adorner options: </strong>bool CanRotate, CanResize, CanMove, void SetBounds(x, y, width, height), SetZoom(double zoomLevel) allow you to change adorner capabilities, restrict it to specific area, and make it zoom-aware </li> </ul>  <p>I didn't have time to add the behaviours back since I don't use those yet and I'm mainly using Visual Studio for development. If anyone is interested in porting these over to the current version <strong></strong><a href="http://tozon.info/blog/">Andrej Tozon</a> created the Behaviours for the <u>original</u> version. Here's a link to <a href="http://cid-d34608bce9688fba.skydrive.live.com/self.aspx/Public/Development/Samples/AdornerTest2.zip">his version</a>. Thanks Andrej!</p>  <p>The source code is licensed under <a href="http://opensource.org/licenses/ms-pl.html">MS-PL</a>.</p>  <p>Pictures are licensed under the following Creative Commons License: <a href="http://creativecommons.org/licenses/by/2.0/">http://creativecommons.org/licenses/by/2.0/</a>     <br />Picture locations:     <br /><a href="http://www.flickr.com/photos/proimos/3954987905/">http://www.flickr.com/photos/proimos/3954987905/</a>     <br /><a href="http://www.flickr.com/photos/proimos/4300827122/">http://www.flickr.com/photos/proimos/4300827122/</a>     <br /><a href="http://www.flickr.com/photos/tenioman/2771903123/">http://www.flickr.com/photos/tenioman/2771903123/</a></p>  <p>Hope you like it! Please comment!</p>